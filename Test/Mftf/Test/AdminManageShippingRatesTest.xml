<?xml version="1.0" encoding="UTF-8"?>

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="../../../../../../vendor/magento/magento2-functional-testing-framework/src/Magento/FunctionalTestingFramework/Test/etc/testSchema.xsd">
    <test name="AdminManageShippingRates">
        <annotations>
            <features value="Manage Shipping Rates"/>
            <stories value="Manage Shipping Rates"/>
            <title value="Import and Export Shipping Rates"/>
            <description value="Importing Shipping Rates from a file and then export them."/>
            <group value="iredeem"/>
            <group value="vendorShippingRates"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>

        <actionGroup ref="ImportShippingRates" stepKey="importShippingRates"/>
        <seeElement selector="{{AdminShippingRatesMessagesSection.SuccessMessage}}" stepKey="assertSuccess"/>
        <selectOption selector="{{AdminShippingRatesExportSection.Vendor}}" userInput="{{ShippingRatesExport.vendor}}" stepKey="selectVendor"/>
        <click selector="{{AdminShippingRatesExportSection.Submit}}" stepKey="submit"/>
        <dontSee selector="{{AdminShippingRatesMessagesSection.ErrorMessage}}" stepKey="assertNotError"/>
    </test>

    <test name="AdminManageInvalidShippingRates">
        <annotations>
            <features value="Manage Shipping Rates"/>
            <stories value="Manage Shipping Rates"/>
            <title value="Import and Export Shipping Rates from a invalid file"/>
            <description value="Importing Shipping Rates from a invalid file"/>
            <group value="iredeem"/>
            <group value="vendorShippingRatesInvalidFile"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>

        <actionGroup ref="ImportShippingRatesInvalidFile" stepKey="importShippingRates"/>
        <dontSee selector="{{AdminShippingRatesMessagesSection.SuccessMessage}}" stepKey="assertSuccess"/>
        <seeElement selector="{{AdminShippingRatesMessagesSection.ErrorMessage}}" stepKey="assertNotError"/>
    </test>

    <test name="AdminManageRegionsOnlyShippingRates">
        <annotations>
            <features value="Manage Shipping Rates"/>
            <stories value="Manage Shipping Rates"/>
            <title value="Import and Export Shipping Rates with regions only"/>
            <description value="Importing Shipping Rates with regions only"/>
            <group value="iredeem"/>
            <group value="vendorShippingRatesRegionsOnly"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>

        <actionGroup ref="ImportShippingRatesRegionsOnly" stepKey="importShippingRates"/>
        <seeElement selector="{{AdminShippingRatesMessagesSection.SuccessMessage}}" stepKey="assertSuccess"/>
    </test>

    <test name="AdminManageRegionsAndCountriesShippingRates">
        <annotations>
            <features value="Manage Shipping Rates"/>
            <stories value="Manage Shipping Rates"/>
            <title value="Import and Export Shipping Rates with regions and countries"/>
            <description value="Importing Shipping Rates with regions and countries"/>
            <group value="iredeem"/>
            <group value="vendorShippingRatesRegionsAndCountries"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>

        <actionGroup ref="ImportShippingRatesRegionsAndCountries" stepKey="importShippingRates"/>
        <seeElement selector="{{AdminShippingRatesMessagesSection.SuccessMessage}}" stepKey="assertSuccess"/>
    </test>

    <test name="AdminManageReImportShippingRates">
        <annotations>
            <features value="Manage Shipping Rates"/>
            <stories value="Manage Shipping Rates"/>
            <title value="Re-import successfully a file"/>
            <description value="Re-import successfully a file"/>
            <group value="iredeem"/>
            <group value="reimportfile"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>

        <actionGroup ref="ImportShippingRatesRegionsAndCountries" stepKey="importShippingRates"/>
        <!--Re-import file-->
        <actionGroup ref="ReImportSuccessfullyAFile" stepKey="reImportShippingRates"/>
        <seeElement selector="{{AdminShippingRatesMessagesSection.SuccessMessage}}" stepKey="assertSuccess"/>
    </test>
</tests>